<div class="keyword-container">
    <!-- <app-result-header [jobResults]="jobResults"></app-result-header> -->
    <app-job-details *ngIf="!isLoading" [headerTitle]="headerTitle" [jobHeaders]="jobHeaders" [productDetails]="productDetails"
        [showCreateButton]="true" (createJob)="addNewKeyword($event)" [pageCount]="totalItems" [showSearch]="true" [currentpageIndex]='currentpageIndex'
        [isLoading]="isLoading" (pageChange)="onPageChange($event)" [itemsTobeDisplayedPerPage]="limitPerPage">
        <ng-template #filedsHeader let-product>
            <td>
                <span>{{product?.title}}</span>
            </td>
            <td>
                <span>{{product?.keywordInput}}</span>
            </td>
            <td>
                <span class="status-wrapper" [style.background]="getBackgroundColor(product)">{{product?.status}}</span>
            </td>
            <td>
                <span>{{product?.lastRunAt ? createdDate(product?.lastRunAt) : ''}}</span>
            </td>
            <td>
                <span>{{product?.createdAt ? createdDate(product?.createdAt) : ''}}</span>
            </td>
            <td>
                <span>{{product?.createdBy ? product?.createdBy : ''}}</span>
             </td>
            <td>
                <span>{{product?.vendor?.name ? product.vendor.name : ''}}</span>
            </td>
            <td>
                <!-- <span *ngFor="let line of actionItems; let i = index;"> -->
                    <a class="action-icons glyphicon glyphicon-flash" (click)="navigateTo(product, 0)"></a>
                    <a class="action-icons glyphicon glyphicon-eye-open" (click)="navigateTo(product, 1)"></a>
                    <a *ngIf="product?.lastRunAt" class="action-icons glyphicon glyphicon-th-large" (click)="navigateTo(product, 2)"></a>
                    <a class="action-icons glyphicon glyphicon-trash" (click)="navigateTo(product, 3)"></a>
                <!-- </span> -->
            </td>
        </ng-template>
    </app-job-details>
    <app-upstart-modal *ngIf="createNewKeyword" [modalTitle]="modalTitle">
        <div class="add-modal-body" id="create-modal">
            <form *ngIf="!jobCreated" (ngSubmit)="addKeywords()">
                <div class="form-group">
                    <span class="error-input" *ngIf="showErrorMessage">Keyword input already available</span><br/>
                    <label for="jobTitle" class="col-form-label"><span class="error-input">*&nbsp;</span>Job Title</label>
                    <div>
                        <textarea name="jobTitle" class="form-control-plaintext" id="jobTitle" [(ngModel)]="jobTitle" required [ngModelOptions]="{standalone: true}" [class.showError]="!jobTitle && showError"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <span class="error-input" *ngIf="!keywordType && showError">* keyword mode is mandatory</span><br/>
                    <label class="col-form-label"><span class="error-input">*&nbsp;</span>Keyword Input Mode</label>
                    <div>
                    <span *ngFor="let choice of choices">
                        <input type="radio" id="{{ groupName + choice }}" name="keywordType" [value]="choice" [(ngModel)]="defaultChoice" (ngModelChange)="choose($event)" />    
                        <label class="form-check-label" for="inlineRadio1">{{choice}}</label>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="keywordName" class="col-form-label"><span class="error-input">*&nbsp;</span>Keyword Input</label>
                    <div>
                        <textarea type="textarea" [(ngModel)]="keywordInput" class="form-control-plaintext" id="keywordName" required [ngModelOptions]="{standalone: true}" [class.showError]="!keywordInput && showError"></textarea>
                    </div>
                </div>
                <!-- <div class="form-group">
                    <label for="keywordName" class="col-form-label">Targeted Vendor</label>
                    <div>
                        <select class="browser-default custom-select">
                            <option selected>Open this select menu</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                        </select>
                    </div>
                </div> -->
                <div class="form-group">
                    <button type="submit" class="add-keyword-button">Create Job</button>
                </div>
            </form>
            <div *ngIf="jobCreated">
                <span>Job Created Successfully</span>
            </div>
        </div>
    </app-upstart-modal>
    <app-loader [show]='isLoading'></app-loader>
    <div class="no-results-text">
        <span *ngIf='showErrorMessage && !isLoading'>{{showErrorMessage}}</span>
    </div>
</div>
<app-top-notification></app-top-notification>